<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Written Landscapes of Aphrodisias</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Updated Google Fonts: Cinzel and Poppins -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Poppins', sans-serif; /* Default to Poppins */
            background-color: #1a202c; /* Midnight Blue fallback */
            color: #e2e8f0; /* Lighter text for better contrast on blue */
            margin: 0;
            padding: 0;
        }
        .scroll-panel {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        /* --- New Header Styles --- */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 100;
            background-color: #1a202c; /* Midnight Blue background */
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        .logo-img {
            height: 50px; /* Increased logo size */
        }
        .nav-link { 
            font-family: 'Poppins', sans-serif;
            position: relative;
            text-decoration: none;
            @apply px-3 py-2 text-xs sm:text-sm text-gray-300 hover:text-white uppercase tracking-wider transition-colors duration-300; 
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            display: block;
            margin-top: 5px;
            right: 0;
            background: #a0aec0;
            transition: width 0.3s ease;
        }
        .nav-link:hover::after {
            width: 100%;
            left: 0;
            background: #e2e8f0;
        }

        /* Hero Panel (Panel 1) */
        #hero {
            background-color: #2d3748; /* Deep slate blue background */
            padding-top: 72px; /* Account for slightly taller fixed header */
        }
        #hero .text-header {
            flex-shrink: 0;
            padding: 3rem 1rem 1.5rem 1rem;
            text-align: center;
            z-index: 5;
        }
        #hero .image-area-wrapper {
            flex-grow: 1;
            min-height: 0;
            position: relative;
            perspective: 1000px;
        }
        .image-container {
            position: absolute;
            top: 50%;
            left: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            will-change: transform, opacity;
        }
        .stylized-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        #inscription-container {
            width: 45%;
            height: 80%;
            z-index: 1;
        }
        #cherub-left-container, #cherub-right-container {
            width: 30%;
            height: 60%;
            z-index: 2;
        }
        #cherub-left-container .stylized-image {
            transform: scaleX(-1);
        }
        
        /* About Panel (Panel 2) */
        #about {
            background-color: #3b4a5c; /* Lighter slate grey for contrast */
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        /* Explore Models Panel (Panel 3) - Now the Tile Gallery */
        #explore-models {
            background-color: #111; /* Dark charcoal for contrast */
            padding-top: 72px; /* Account for fixed header */
            align-items: center;
            overflow: hidden;
        }
        
        .font-cinzel { font-family: 'Cinzel', serif; letter-spacing: 0.05em; }
        .main-title { font-size: 1.8rem; line-height: 1.2; }
        .subtitle { font-weight: 400; font-size: 1rem; color: #cbd5e0; }
        
        .cta-button { @apply inline-block bg-transparent border-2 border-gray-500 text-gray-300 hover:bg-gray-800 hover:border-gray-700 font-semibold py-2 px-6 rounded-md text-sm tracking-wide transition-colors duration-300 shadow-md; }
        .sub-cta-link { 
            position: relative;
            text-decoration: none;
            @apply text-gray-400 hover:text-white text-sm tracking-wider transition-colors duration-300 mt-4 inline-block; 
        }
        .sub-cta-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            display: block;
            margin-top: 2px;
            right: 0;
            background: #a0aec0;
            transition: width 0.3s ease;
        }
        .sub-cta-link:hover::after {
            width: 100%;
            left: 0;
            background: #e2e8f0;
        }

        /* Institutional Logos in Hero */
        .institutional-logos {
            position: absolute;
            bottom: 1rem;
            left: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            z-index: 20;
        }
        .inst-logo {
            height: 32px;
        }
        .ukri-logo {
            filter: invert(1) grayscale(1) brightness(2);
        }
        
        /* --- TILE GALLERY STYLES --- */
        .tile-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            width: 100%;
            flex-grow: 1;
            gap: 8px;
            padding: 8px;
            box-sizing: border-box;
        }
        .tile { position: relative; perspective: 1200px; }
        .tile-inner { position: relative; width: 100%; height: 100%; transition: transform 0.8s cubic-bezier(0.25, 1, 0.5, 1); transform-style: preserve-3d; }
        .tile.is-flipped .tile-inner { transform: rotateY(180deg); }
        .tile-face { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; overflow: hidden; display: flex; justify-content: center; align-items: center; border-radius: 0.25rem; }
        .tile-front { background-color: #000; transition: filter 0.4s ease; filter: grayscale(80%) opacity(0.7); }
        .tile:hover .tile-front { filter: grayscale(0) opacity(1); }
        .tile-front iframe { width: 100%; height: 100%; object-fit: cover; border: none; pointer-events: none; }
        .tile-back { color: white; transform: rotateY(180deg); padding: 1.5rem; text-align: center; border: 1px solid #3a4a4a; }
        .bg-teal-dark { background-color: #1a2a2a; }
        .bg-green-dark { background-color: #1a2a25; }
        .bg-blue-dark { background-color: #1a252a; }
        .bg-slate-dark { background-color: #252a2a; }
        .bg-charcoal-dark { background-color: #2a2a2a; }
        .tile-actions { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(0,0,0,0.3); opacity: 0; transition: opacity 0.4s ease; z-index: 5; }
        .tile:hover .tile-actions { opacity: 1; }
        .action-icon { background: rgba(20, 20, 20, 0.7); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 50%; padding: 0.75rem; cursor: pointer; transition: transform 0.3s ease, background-color 0.3s ease; }
        .action-icon:hover { transform: scale(1.15); background: rgba(0, 0, 0, 0.8); }
        .action-icon svg { width: 2rem; height: 2rem; stroke: #fff; }
        .info-icon { position: absolute; bottom: 1rem; padding: 0.5rem; }
        .info-icon svg { width: 1.25rem; height: 1.25rem; }
        .flip-back-btn { position: absolute; top: 0.75rem; right: 0.75rem; background: none; border: none; color: #9ca3af; font-size: 1.75rem; cursor: pointer; line-height: 1; transition: color 0.3s ease, transform 0.3s ease; }
        .flip-back-btn:hover { color: #ffffff; transform: scale(1.2); }
        .tile-1 { grid-column: 1 / 3; grid-row: 1 / 3; }
        .tile-2 { grid-column: 3 / 4; grid-row: 1 / 3; }
        .tile-3 { grid-column: 4 / 5; grid-row: 1 / 3; }
        .tile-4 { grid-column: 1 / 3; grid-row: 3 / 5; }
        .tile-5 { grid-column: 3 / 5; grid-row: 3 / 5; }

        /* Fullscreen Modal Styles */
        #fullscreen-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.85); backdrop-filter: blur(8px); z-index: 100; display: flex; justify-content: center; align-items: center; opacity: 0; pointer-events: none; transition: opacity 0.3s ease-in-out; }
        #fullscreen-modal.visible { opacity: 1; pointer-events: all; }
        #fullscreen-modal .modal-content { width: 90%; height: 90%; background-color: #000; border-radius: 0.5rem; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        #fullscreen-modal iframe { width: 100%; height: 100%; border: none; }
        #modal-close-btn { position: absolute; top: 1.5rem; right: 1.5rem; background: none; border: none; color: #9ca3af; font-size: 2.5rem; cursor: pointer; line-height: 1; transition: color 0.3s ease, transform 0.3s ease; }
        #modal-close-btn:hover { color: #ffffff; transform: scale(1.1); }
        
        /* Scroll Arrow Indicators */
        .scroll-indicator { position: absolute; left: 50%; transform: translateX(-50%); z-index: 20; width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.4s ease; pointer-events: none; cursor: pointer; }
        .scroll-panel:hover .scroll-indicator { opacity: 0.5; pointer-events: all; }
        .scroll-indicator:hover { opacity: 1; background-color: rgba(255,255,255,0.1); }
        .scroll-indicator.up { top: 5rem; }
        .scroll-indicator.down { bottom: 1.5rem; }
        .scroll-indicator svg { width: 24px; height: 24px; stroke: #a0aec0; }
        
        @media (min-width: 768px) {
            .main-title { font-size: 2.2rem; }
            .subtitle { font-size: 1.1rem; }
            #hero .text-header { padding-top: 4rem; padding-bottom: 3rem; }
        }
        @media (min-width: 1024px) {
            .main-title { font-size: 2.5rem; }
        }
        @media (max-width: 768px) {
            .tile-grid { grid-template-columns: repeat(2, 1fr); grid-auto-rows: 40vh; height: auto; overflow-y: auto; }
            .tile-1, .tile-2, .tile-3, .tile-4, .tile-5 { grid-column: span 1; grid-row: span 1; }
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="w-full mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-16">
            <a href="#" aria-label="Project Home">
                <img src="https://dl.dropboxusercontent.com/scl/fi/na9gxiikxs4okwg40bhiw/3DAph_logo_dark-removebg-preview.png?rlkey=peifq85dg2oamicmlnej850wd&dl=1" alt="3DAph Project Logo" class="logo-img">
            </a>
            <nav>
                <ul class="flex space-x-1 sm:space-x-2 md:space-x-3">
                    <li><a href="#about" id="nav-about" class="nav-link">About</a></li>
                    <li><a href="#" class="nav-link">Credits</a></li>
                    <li><a href="#" class="nav-link">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main-container">
        <!-- PANEL 1: HERO -->
        <section id="hero" class="scroll-panel">
            <div class="text-header">
                <div class="container mx-auto">
                    <h1 class="font-cinzel main-title font-bold text-white mb-6">
                        Written landscapes of late antique Aphrodisias
                    </h1>
                    <div class="flex flex-col items-center space-y-2">
                        <button id="aboutBtn" class="sub-cta-link">Pioneering database of 3D epigraphy</button>
                        <button id="exploreBtn" class="cta-button">View Sites & 3D Models</button>
                    </div>
                </div>
            </div>
            <div class="image-area-wrapper">
                <div class="image-container" id="inscription-container">
                    <img src="https://www.dropbox.com/scl/fi/l7d58i96v27gbcgebtmtv/NW-gate_gibberish-but-good-palette.png?rlkey=97vvreo0izjg295nq9l6g1cwy&dl=1" alt="A marble inscription with golden lettering from Aphrodisias" class="stylized-image">
                </div>
                <div class="image-container" id="cherub-left-container">
                    <img src="https://dl.dropboxusercontent.com/scl/fi/8xizecipq9fug5svoisxx/cherub_NW-gate_teal.png?rlkey=ggkcgm8zt3j20xredw8su8e2e" alt="Stylized image of a cherub" class="stylized-image">
                </div>
                <div class="image-container" id="cherub-right-container">
                    <img src="https://dl.dropboxusercontent.com/scl/fi/8xizecipq9fug5svoisxx/cherub_NW-gate_teal.png?rlkey=ggkcgm8zt3j20xredw8su8e2e" alt="Stylized image of a cherub" class="stylized-image">
                </div>
            </div>
            <div class="institutional-logos">
                <img src="https://communications.admin.ox.ac.uk/sites/all/themes/custom/oxtheme/images/brandmark/svg/oxlogo-rect-border.svg" alt="University of Oxford Logo" class="inst-logo">
                <img src="https://upload.wikimedia.org/wikipedia/en/4/4f/Engineering_and_Physical_Sciences_Research_Council_logo.svg" alt="UKRI Logo" class="inst-logo ukri-logo">
            </div>
            <button class="scroll-indicator down" data-target-panel="1">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" /></svg>
            </button>
        </section>

        <!-- PANEL 2: ABOUT -->
        <section id="about" class="scroll-panel">
            <button class="scroll-indicator up" data-target-panel="0">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" /></svg>
            </button>
            <div class="container mx-auto px-4 lg:px-8 max-w-3xl">
                <h2 class="font-cinzel text-3xl md:text-4xl text-center text-white mb-6">About the Project</h2>
                <p class="text-lg text-gray-300 leading-relaxed text-center">
                    This project re-evaluates the role of inscribed texts in the urban environment of the ancient world. By creating high-fidelity 3D models of monuments from sites like Aphrodisias, we can re-situate inscriptions in their original architectural contexts. This digital approach allows for new perspectives on how writing shaped memory, religion, and civic identity, offering a resource for scholars and the public to explore the lived experience of ancient cities.
                </p>
            </div>
            <button class="scroll-indicator down" data-target-panel="2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" /></svg>
            </button>
        </section>

        <!-- PANEL 3: TILE GALLERY -->
        <section id="explore-models" class="scroll-panel">
            <button class="scroll-indicator up" data-target-panel="1">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5" /></svg>
            </button>
            <h2 class="font-cinzel text-3xl md:text-4xl text-center text-white mb-4 flex-shrink-0">Sites &amp; 3D Models</h2>
            <div class="tile-grid">
                <div class="tile tile-1">
                    <div class="tile-inner">
                        <div class="tile-face tile-front">
                            <iframe src="https://rcla.nira.app/a/0lUMCtupR0mr_7WJUDFUmw/1" loading="lazy"></iframe>
                            <div class="tile-actions"><button class="action-icon expand-btn" data-model-src="https://rcla.nira.app/a/0lUMCtupR0mr_7WJUDFUmw/1"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m4.5 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" /></svg></button><button class="action-icon info-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /></svg></button></div>
                        </div>
                        <div class="tile-face tile-back bg-teal-dark"><button class="flip-back-btn">&times;</button>
                            <div><h3 class="font-cinzel text-xl mb-2">The Temple-Church</h3><p class="text-sm text-gray-300">The imperial temple of Aphrodite was dramatically converted into a Christian basilica, representing a vivid example of religious change in the urban landscape.</p></div>
                        </div>
                    </div>
                </div>

                <!-- ===== MODIFIED TILE 2 (Hadrianic Baths) ===== -->
                <div class="tile tile-2">
                    <div class="tile-inner">
                        <div class="tile-face tile-front"><iframe src="https://rcla.nira.app/a/GdZnVql1TZC9lDo6jaVl6g/1" loading="lazy"></iframe>
                            <div class="tile-actions"><button class="action-icon expand-btn" data-model-src="https://rcla.nira.app/a/GdZnVql1TZC9lDo6jaVl6g/1"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m4.5 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" /></svg></button><button class="action-icon info-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /></svg></button></div>
                        </div>
                        <div class="tile-face tile-back bg-green-dark"><button class="flip-back-btn">&times;</button>
                            <div>
                                <h3 class="font-cinzel text-xl mb-2">The Hadrianic Baths</h3>
                                <p class="text-sm text-gray-300">A major centre of public life, the baths reveal ongoing civic investment and its enduring importance to the community deep into late antiquity.</p>
                                <!-- New Button for Interactive Plan -->
                                <button class="plan-btn mt-4 inline-block bg-gray-700 hover:bg-gray-600 text-gray-200 text-xs py-2 px-4 rounded-md transition-colors duration-300 tracking-wide uppercase" data-plan-src="Had baths_all based_Zenos added.html">
                                    View Interactive Plan
                                </button>
                                <!-- End of New Button -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- ===== END OF MODIFICATION ===== -->

                <div class="tile tile-3">
                    <div class="tile-inner">
                        <div class="tile-face tile-front"><iframe src="https://rcla.nira.app/a/1GqbZ5daQxScOxvwpW_6Pg/1" loading="lazy"></iframe>
                            <div class="tile-actions"><button class="action-icon expand-btn" data-model-src="https://rcla.nira.app/a/1GqbZ5daQxScOxvwpW_6Pg/1"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m4.5 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" /></svg></button><button class="action-icon info-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /></svg></button></div>
                        </div>
                        <div class="tile-face tile-back bg-blue-dark"><button class="flip-back-btn">&times;</button>
                            <div><h3 class="font-cinzel text-xl mb-2">Place of Palms</h3><p class="text-sm text-gray-300">Place of Palms is a massive public space complete with the largest pool surviving from antiquity and hundreds of graffiti around it.</p></div>
                        </div>
                    </div>
                </div>
                
                <div class="tile tile-4">
                    <div class="tile-inner">
                        <div class="tile-face tile-front"><iframe src="https://rcla.nira.app/a/k-qkln37Qt6vBvhNFBFJDw/1" loading="lazy"></iframe>
                            <div class="tile-actions"><button class="action-icon expand-btn" data-model-src="https://rcla.nira.app/a/k-qkln37Qt6vBvhNFBFJDw/1"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m4.5 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" /></svg></button><button class="action-icon info-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /></svg></button></div>
                        </div>
                        <div class="tile-face tile-back bg-slate-dark"><button class="flip-back-btn">&times;</button>
                            <div><h3 class="font-cinzel text-xl mb-2">Honours for Honorius</h3><p class="text-sm text-gray-300">This honorific statue base illustrates the continued practice of imperial representation and loyalty in the city during the early 5th century.</p></div>
                        </div>
                    </div>
                </div>
                <div class="tile tile-5">
                    <div class="tile-inner">
                        <div class="tile-face tile-front"><iframe src="https://rcla.nira.app/a/Diz5mSWRTZ2yyXNTOEAbVQ/1" loading="lazy"></iframe>
                            <div class="tile-actions"><button class="action-icon expand-btn" data-model-src="https://rcla.nira.app/a/Diz5mSWRTZ2yyXNTOEAbVQ/1"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m4.5 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15" /></svg></button><button class="action-icon info-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" /></svg></button></div>
                        </div>
                        <div class="tile-face tile-back bg-charcoal-dark"><button class="flip-back-btn">&times;</button>
                             <div><h3 class="font-cinzel text-xl mb-2">Honours for Julian/Theodosios</h3><p class="text-sm text-gray-300">A fascinating example of re-appropriation, this statue base was originally for the Emperor Julian and later re-inscribed for Theodosios.</p></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Fullscreen Modal Structure -->
    <div id="fullscreen-modal">
        <div class="modal-content">
            <iframe id="modal-iframe" allow="autoplay; fullscreen; vr" allowfullscreen></iframe>
        </div>
        <button id="modal-close-btn">&times;</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const heroSection = document.getElementById('hero');
            const inscription = document.getElementById('inscription-container');
            const cherubLeft = document.getElementById('cherub-left-container');
            const cherubRight = document.getElementById('cherub-right-container');
            
            if (heroSection && inscription && cherubLeft && cherubRight) {
                if (window.innerWidth < 768) return;

                let animationState = { target: 0, current: 0, smoothing: 0.05 };
                const animParams = {
                    inscription: { startY: 20, endY: -80, startScale: 0.8, endScale: 1.25 },
                    cherubLeft: { startX: -200, endX: -135, startY: -50, endY: -20, startOpacity: 0, endOpacity: 1 },
                    cherubRight: { startX: 100, endX: 35, startY: -50, endY: -20, startOpacity: 0, endOpacity: 1 }
                };
                const lerp = (start, end, t) => start * (1 - t) + end * t;

                function updateAnimation() {
                    animationState.current += (animationState.target - animationState.current) * animationState.smoothing;
                    if (Math.abs(animationState.target - animationState.current) < 0.001) {
                        animationState.current = animationState.target;
                    }
                    const t = animationState.current;
                    const insY = lerp(animParams.inscription.startY, animParams.inscription.endY, t);
                    const insScale = lerp(animParams.inscription.startScale, animParams.inscription.endScale, t);
                    inscription.style.transform = `translate(-50%, ${insY}%) scale(${insScale})`;
                    const cLeftX = lerp(animParams.cherubLeft.startX, animParams.cherubLeft.endX, t);
                    const cLeftY = lerp(animParams.cherubLeft.startY, animParams.cherubLeft.endY, t);
                    cherubLeft.style.transform = `translate(${cLeftX}%, ${cLeftY}%)`;
                    cherubLeft.style.opacity = lerp(animParams.cherubLeft.startOpacity, animParams.cherubLeft.endOpacity, t);
                    const cRightX = lerp(animParams.cherubRight.startX, animParams.cherubRight.endX, t);
                    const cRightY = lerp(animParams.cherubRight.startY, animParams.cherubRight.endY, t);
                    cherubRight.style.transform = `translate(${cRightX}%, ${cRightY}%)`;
                    cherubRight.style.opacity = lerp(animParams.cherubRight.startOpacity, animParams.cherubRight.endOpacity, t);
                    requestAnimationFrame(updateAnimation);
                }
                updateAnimation();

                heroSection.addEventListener('mouseenter', () => { animationState.target = 1; });
                heroSection.addEventListener('mouseleave', () => { animationState.target = 0; });
            }

            const panels = document.querySelectorAll('.scroll-panel');
            const exploreBtn = document.getElementById('exploreBtn');
            const aboutBtn = document.getElementById('aboutBtn');
            const navAboutBtn = document.getElementById('nav-about');
            const scrollIndicators = document.querySelectorAll('.scroll-indicator');
            let currentPanel = 0;
            let isScrolling = false;
            const scrollDuration = 1000;

            function scrollToPanel(panelIndex) {
                if (isScrolling || panelIndex < 0 || panelIndex >= panels.length) return;
                const targetPanel = panels[panelIndex];
                if (!targetPanel) return;
                isScrolling = true;
                targetPanel.scrollIntoView({ behavior: 'smooth' });
                setTimeout(() => {
                    currentPanel = panelIndex;
                    isScrolling = false;
                }, scrollDuration);
            }

            if (aboutBtn) { aboutBtn.addEventListener('click', (e) => { e.preventDefault(); scrollToPanel(1); }); }
            if (navAboutBtn) { navAboutBtn.addEventListener('click', (e) => { e.preventDefault(); scrollToPanel(1); }); }
            if (exploreBtn) { exploreBtn.addEventListener('click', (e) => { e.preventDefault(); scrollToPanel(2); }); }
            scrollIndicators.forEach(indicator => {
                indicator.addEventListener('click', (e) => {
                    const targetIndex = parseInt(e.currentTarget.dataset.targetPanel);
                    scrollToPanel(targetIndex);
                });
            });

            let lastWheelTime = 0;
            window.addEventListener('wheel', (event) => {
                event.preventDefault();
                const now = new Date().getTime();
                if (now - lastWheelTime < scrollDuration) return;
                lastWheelTime = now;
                if (event.deltaY > 0) { scrollToPanel(currentPanel + 1); } 
                else { scrollToPanel(currentPanel - 1); }
            }, { passive: false });
            
            let touchStartY = 0;
            window.addEventListener('touchstart', (event) => { touchStartY = event.touches[0].clientY; });
            window.addEventListener('touchend', (event) => {
                const touchEndY = event.changedTouches[0].clientY;
                const deltaY = touchEndY - touchStartY;
                const swipeThreshold = 50;
                if (Math.abs(deltaY) > swipeThreshold) {
                     if (deltaY < 0) { scrollToPanel(currentPanel + 1); } 
                     else { scrollToPanel(currentPanel - 1); }
                }
            });

            // --- Tile Gallery Logic ---
            const tiles = document.querySelectorAll('.tile');
            const modal = document.getElementById('fullscreen-modal');
            const modalIframe = document.getElementById('modal-iframe');
            const closeModalBtn = document.getElementById('modal-close-btn');

            tiles.forEach(tile => {
                const infoBtn = tile.querySelector('.info-icon');
                const expandBtn = tile.querySelector('.expand-btn');
                const flipBackBtn = tile.querySelector('.flip-back-btn');
                const planBtn = tile.querySelector('.plan-btn'); // <-- Find the new plan button

                if(infoBtn) { infoBtn.addEventListener('click', (e) => { e.stopPropagation(); tile.classList.add('is-flipped'); }); }
                if(flipBackBtn) { flipBackBtn.addEventListener('click', (e) => { e.stopPropagation(); tile.classList.remove('is-flipped'); }); }
                
                // Listener for the 3D Model (front button)
                if(expandBtn) {
                    expandBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const modelSrc = expandBtn.dataset.modelSrc;
                        if (modelSrc) {
                            modalIframe.src = modelSrc;
                            modal.classList.add('visible');
                        }
                    });
                }
                
                // <-- New listener for the 2D Plan (back button) -->
                if(planBtn) {
                    planBtn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const planSrc = planBtn.dataset.planSrc;
                        if (planSrc) {
                            modalIframe.src = planSrc;
                            modal.classList.add('visible');
                        }
                    });
                }
                // <-- End of new listener -->
            });
            
            function closeModal() {
                modal.classList.remove('visible');
                modalIframe.src = ''; // Clear src on close to stop content (like Nira models) from running
            }

            if(closeModalBtn) { closeModalBtn.addEventListener('click', closeModal); }
            if(modal){ modal.addEventListener('click', (e) => { if (e.target === modal) { closeModal(); } }); }
        });
    </script>
</body>
</html>